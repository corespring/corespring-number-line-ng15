<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="//fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet">
  <script src="pie.js"
      type="text/javascript"></script>
  <script src="controllers.js"
      type="text/javascript"></script>
  <script src="//cdn.mathjax.org/mathjax/2.7-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
      type="text/javascript"></script>
  <script type="text/javascript">
    window.pie = window.pie || {};
    window.pie.env = {mode: 'gather'};
    window.pie.model = {
      'pies': [{
        'id': '1',
        'pie': {'name': 'corespring-number-line-ng15', 'version': '1.0.0'},
        'correctResponse': [{'type': 'point', 'pointType': 'full', 'domainPosition': 0.125}],
        'feedback': {'correctFeedbackType': 'none', 'partialFeedbackType': 'none', 'incorrectFeedbackType': 'none'},
        'allowPartialScoring': false,
        'partialScoring': [{}],
        'model': {
          'config': {
            'domain': [-5, 5],
            'maxNumberOfPoints': 20,
            'tickFrequency': 11,
            'showMinorTicks': true,
            'snapPerTick': 1,
            'tickLabelOverrides': [],
            'initialType': 'PF',
            'exhibitOnly': false,
            'availableTypes': {
              'PF': true,
              'PE': true,
              'LFF': true,
              'LEF': true,
              'LFE': true,
              'LEE': true,
              'RFN': true,
              'RFP': true,
              'REN': true,
              'REP': true
            }
          }
        }
      }]
    };
    window.pie.session = [];

    document.addEventListener('pie.player-ready', function (event) {
      var player = event.target;
      var pieController = new pie.Controller(window.pie.model, window['8be4a6d395e7f5bbe29ec27e8257fb3c']);

      player.controller = pieController;
      player.env = window.pie.env;
      player.session = window.pie.session;

      var panel = document.querySelector('pie-control-panel');
      panel.env = window.pie.env;

      pieController.getLanguages().then(function (l) {
        panel.languages = l;
      });

      panel.addEventListener('envChanged', function (event) {

        player.env = event.target.env;

        if (event.target.env.mode === 'evaluate') {
          player.getOutcome().then(function (outcome) {
            panel.score = ' Score: ' + outcome.summary.percentage + '% Points: ' + outcome.summary.points + '/' + outcome.summary.maxPoints;
          });
        } else {
          panel.score = '';
        }

      });
    });

  </script>
</head>
<body>
<pie-control-panel></pie-control-panel>
<pie-player>
  <corespring-number-line-ng15 pie-id="1"></corespring-number-line-ng15>
</pie-player>
</body>
</html>